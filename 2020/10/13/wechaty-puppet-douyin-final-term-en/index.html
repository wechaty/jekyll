<!DOCTYPE html>
<html lang="en">
<head>
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PD2PL84');</script>
<!-- End Jekyll GTM tag v1.0.3 -->


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    

    <title>
       "Douyin Chatbot based on RPA with Wechaty Interface - Final Report" | Wechaty
    </title>

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>“Douyin Chatbot based on RPA with Wechaty Interface - Final Report” | Wechaty</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="“Douyin Chatbot based on RPA with Wechaty Interface - Final Report”" />
<meta name="author" content="wangjunwei" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Final report for the Summer 2020 project building a Douyin (TikTok) chatbot using RPA with autojs on Android, connected via socket to a Wechaty puppet." />
<meta property="og:description" content="Final report for the Summer 2020 project building a Douyin (TikTok) chatbot using RPA with autojs on Android, connected via socket to a Wechaty puppet." />
<link rel="canonical" href="https://wechaty.js.org/2020/10/13/wechaty-puppet-douyin-final-term-en/" />
<meta property="og:url" content="https://wechaty.js.org/2020/10/13/wechaty-puppet-douyin-final-term-en/" />
<meta property="og:site_name" content="Wechaty" />
<meta property="og:image" content="https://wechaty.js.org/assets/2020/10-wechaty-puppet-douyin-final-term-en/wechaty-puppet-douyin-logo.webp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-13T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://wechaty.js.org/assets/2020/10-wechaty-puppet-douyin-final-term-en/wechaty-puppet-douyin-logo.webp" />
<meta property="twitter:title" content="“Douyin Chatbot based on RPA with Wechaty Interface - Final Report”" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"wangjunwei"},"dateModified":"2020-10-13T00:00:00+00:00","datePublished":"2020-10-13T00:00:00+00:00","description":"Final report for the Summer 2020 project building a Douyin (TikTok) chatbot using RPA with autojs on Android, connected via socket to a Wechaty puppet.","headline":"“Douyin Chatbot based on RPA with Wechaty Interface - Final Report”","image":"https://wechaty.js.org/assets/2020/10-wechaty-puppet-douyin-final-term-en/wechaty-puppet-douyin-logo.webp","mainEntityOfPage":{"@type":"WebPage","@id":"https://wechaty.js.org/2020/10/13/wechaty-puppet-douyin-final-term-en/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://wechaty.js.org/assets/images/logo.png"},"name":"wangjunwei"},"url":"https://wechaty.js.org/2020/10/13/wechaty-puppet-douyin-final-term-en/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <link rel="manifest" href="/manifest.json">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://s3.pstatp.com/cdn/expire-1-M/font-awesome/5.3.1/css/all.css" crossorigin="anonymous">

    <!-- Google Fonts in China Thanks @crossly @sidny -->
    <link href="https://fonts.loli.net/css?family=Lora" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/assets/css/theme.css">

    <!-- Highlight Stylesheet -->
    <link rel="stylesheet" href="/assets/css/highlight.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://s0.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

</head>

<body class="">
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PD2PL84"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Jekyll GTM tag v1.0.3 (noscript) -->


    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/"><strong>Wechaty</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
  <a class="nav-link" href="/news/">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/blog/">Blog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/docs/">Docs</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/contributors/">Contributors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/PMC#wechaty-committers" target="_blank">Talks</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/wechaty#readme" target="_blank">GitHub</a>
</li>


            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <li class="nav-item">
                  <a class="nav-link" href="/search/">Search</a>
                </li>
            </ul>
        </div>
    </div>
    </nav>

  <!-- Search results moved to a dedicated /search page -->

    <!-- Content -->
    <main role="main" class="site-content">
        

<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row  justify-content-between ">
				<div class=" col-md-6  pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
            <span class="catlist">

            
              <a class="sscroll text-danger" href="/categories.html#project">project</a><span class="sep">, </span>
            

            </span>
					</p>
					<h1 class="display-4 mb-4 article-headline"> "Douyin Chatbot based on RPA with Wechaty Interface - Final Report"</h1>
					<div class="d-flex align-items-center">
                        
                          <a href="/contributors/wangjunwei">
                            <img class="rounded-circle" src="/assets/contributors/wangjunwei/avatar.webp" alt="wangjunwei" width="70"/>
                          </a>
                        
						<small class="ml-3"> wangjunwei <span><a target="_blank" href="https://weibo.com/u/5513861204" class="btn btn-outline-success btn-sm btn-round ml-1">Follow</a></span>
                            <span class="text-muted d-block mt-1">Oct 13, 2020 · <span class="reading-time">
  
  
    4 mins read
  
</span>
</span>
						</small>
					</div>
				</div>
                
				<div class="col-md-6 pr-0 align-self-center">
					<img class="rounded" src="/assets/2020/10-wechaty-puppet-douyin-final-term-en/wechaty-puppet-douyin-logo.webp" alt=" "Douyin Chatbot based on RPA with Wechaty Interface - Final Report"">
				</div>
                
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">

    <!-- Share -->
<div class="col-lg-2 pr-4 mb-5 col-md-12">
  <div class="sticky-top sticky-top-offset text-center">
    <div class="text-muted">
    </div>
    <div class="share d-inline-block">
      <!-- AddToAny BEGIN -->
      <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
        <a class="a2a_button_wechat" title='Wechat'>
          <img id="qrcode" title="Wechat"
            src="/assets/contributors/wechaty/icon.png"
            width="64" height="64"
          />
        </a>
        <a class="a2a_button_wechat" title='Wechat'></a>
        <a class="a2a_button_sina_weibo" title='Weibo'></a>
        <a class="a2a_button_linkedin" title='LinkedIn'></a>
        <a class="a2a_button_facebook" title='FaceBook'></a>
        <a class="a2a_button_twitter" title='Twitter'></a>
        <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
        <!-- AddToAny BEGIN -->
      </div>
      <script async src="https://static.addtoany.com/menu/page.js"></script>
      <!-- AddToAny END -->
    </div>
  </div>
</div>

<script>
  var href = document.location.href
  var url = 'https://api.qrserver.com/v1/create-qr-code/?data='
            + href
            + '&size=512x512'
  var img = document.getElementById('qrcode')

  img.src=encodeURI(url)
</script>


		<div class="col-md-12 col-lg-8">

      <!-- Article -->
			<article class="article-post">
			<blockquote>
  <p>This is a translated version of the original Chinese post. You can find the original post <a href="/2020/10/13/wechaty-puppet-douyin-final-term/">here</a>.</p>
</blockquote>

<p>The “Open Source Software Supply Chain Lighting Program - Summer 2020” (hereinafter referred to as Summer 2020) is a summer activity for university students jointly organized by the Institute of Software at the Chinese Academy of Sciences and the openEuler community.</p>

<p>It aims to encourage students to actively participate in the development and maintenance of open source software and promote the vigorous development of excellent domestic open source software communities.</p>

<p>Depending on the difficulty and completion of the project, participants can also receive activity bonuses and trophies from the “Open Source Software Supply Chain Lighting Program - Summer 2020”.</p>

<p>Official website: <a href="https://isrc.iscas.ac.cn/summer2020">https://isrc.iscas.ac.cn/summer2020</a> Official news: <a href="http://www.iscas.ac.cn/xshd2016/xshy2016/202004/t20200426_5563484.html">http://www.iscas.ac.cn/xshd2016/xshy2016/202004/t20200426_5563484.html</a></p>

<p>This project [Douyin Chatbot based on RPA with Wechaty Interface] is an open source project supported by Summer 2020.</p>

<h2 id="final-report-douyin-chatbot-based-on-rpa-with-wechaty-interface">Final Report: Douyin Chatbot based on RPA with Wechaty Interface</h2>

<h2 id="project-information">Project Information</h2>

<ul>
  <li>Project Name: Douyin Chatbot based on RPA with Wechaty Interface</li>
  <li>Solution Description: On the Android side, control Douyin through autojs, connect to the puppet via socket, and then connect to wechaty</li>
  <li>Timeline: July 19 - August 15 to complete various solution attempts and exploration, August 15 - September 15 to complete various interface integrations for the puppet</li>
</ul>

<h2 id="project-progress">Project Progress</h2>

<ul>
  <li>Project Achievements:
    <ul>
      <li>Became familiar with the usage and operation methods of wechaty</li>
      <li>Explored various solutions:
        <ul>
          <li>Douyin’s private message sending openapi requires users to be enterprise users; the api is only effective for enterprise Douyin accounts</li>
          <li>Explored MonkeyDEV and IDA reverse engineering methods for private message protocols</li>
          <li>Couldn’t find a method to run Android apps in Chrome, or the methods were ineffective</li>
          <li>Tried to obtain Douyin’s private message method by packet capturing on Android and iOS, but couldn’t capture private messages</li>
          <li>The autojs method of controlling Android apps is currently being adopted and is the only currently operational method; the encapsulation of basic Douyin operation methods and socket communication has been completed</li>
        </ul>
      </li>
      <li>The autojs-controlled version of Douyin has completed automatic login, message listening, message sending and other methods</li>
      <li>Ran a simple dingdongbot using socket and autojs methods, <a href="https://youtu.be/TY4hn9TIWlA">video demonstration</a> (YouTube)</li>
      <li>Completed the first version of the Douyin puppet and the autojs method for operating Douyin</li>
      <li>The puppet completed the basic communication functions and can run dingdongbot</li>
      <li>Wechaty puppet combined with autojs can implement automatic message replies</li>
    </ul>
  </li>
  <li>Problems Encountered and Solutions:
    <ul>
      <li>Encountered many problems with this code; had little exposure to TypeScript coding and many unfamiliar areas</li>
      <li>Initially tried many solutions for choosing the private message method, and ultimately chose autojs as the tool for operating Douyin private messages, but it’s not very stable and has low performance requiring certain hardware support</li>
      <li>Autojs is sometimes very unstable, debugging is abnormally troublesome, can only progress bit by bit; app control names are very random, different Douyin versions have different control names, so the app needs a unified version</li>
      <li>Running a Douyin puppet requires an Android phone or computer running an emulator with autojs, then using nodejs to run wechaty and puppet, need to run two services, which is a bit troublesome</li>
      <li>When exploring how to get Douyin image messages, there are certain problems with finding images through auto, the running speed is slow, first open the image then cache it then load the image to transcode it into base64 and then send it to the puppet</li>
      <li>ESLint syntax formatting was unfamiliar at the beginning and often reported various errors</li>
      <li>Unfamiliar with puppet interfaces and methods, wrote a Douyin puppet by imitation, and finally it can run dingdongbot</li>
      <li>When messages are frequent, message accumulation may occur; autojs needs time to process messages; when autojs enters a certain session and this session sends a message, that message may not be read, but messages outside this session can be read and replied to</li>
      <li>The Douyin puppet needs many improvements and new message types and functions to be added…</li>
      <li>Due to the 996 work schedule during my internship, there was too little progress in the later stages; need to work harder to contribute to the community</li>
    </ul>
  </li>
</ul>

<h3 id="ppt">PPT</h3>

<div style="
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://www.youtube.com/embed/zDIPzGztn_E" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>

<h3 id="live-coding">Live coding</h3>

<div style="
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="https://www.youtube.com/embed/OF7UfQ4o_5c" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>

<h3 id="project-links">Project Links</h3>

<ul>
  <li>Project links: <a href="https://github.com/gavinwang23/douyin-autojs">https://github.com/gavinwang23/douyin-autojs</a> / <a href="https://github.com/gavinwang23/wechaty-puppet-douyin">https://github.com/gavinwang23/wechaty-puppet-douyin</a></li>
</ul>

<blockquote>
  <p>This is a translated version of the original Chinese post. You can find the original post <a href="/2020/10/13/wechaty-puppet-douyin-final-term/">here</a>.</p>
</blockquote>

			</article>

			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#douyin">douyin</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#summer-of-wechaty">summer-of-wechaty</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#summer-2020">summer-2020</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#ecosystem">ecosystem</a>
				
				</span>
			</div>

            <!-- Mailchimp Subscribe Form -->
            
			<div class="border p-5 bg-lightblue">
				<div class="row justify-content-between">
					<div class="col-md-6 mb-2 mb-md-0">
						<h5 class="font-weight-bold">Join Newsletter</h5>
						 Get the latest news right in your inbox. We never spam!
					</div>
					<div class="col-md-6">
						<div class="row">
              <form action="https://zixia.us4.list-manage.com/subscribe/post?u=a8584b55dea5aa8bbc14bd1a0&amp;id=d9899f0d70" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate w-100" target="_blank" novalidate>
                <input type="email" placeholder="Enter e-mail address" name="EMAIL" class="required email form-control w-100" id="mce-EMAIL" autocomplete="on" required>
                <input type="text"  placeholder="Name"                 name="FNAME" class="required form-control w-100"       id="mce-FNAME" autocomplete="on" required>
                <button type="submit" value="Subscribe" name="subscribe" class="heart btn btn-success btn-block w-100 mt-2">Subscribe</button>
              </form>
						</div>
					</div>
				</div>
			</div>
            


             <!-- Author Box -->
                
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                        
                          <a href="/contributors/wangjunwei">
                            <img class="rounded-circle" src="/assets/contributors/wangjunwei/avatar.webp" alt="wangjunwei" width="90"/>
                          </a>
                        
					</div>
					<div class="col-md-10">
                        <h5 class="font-weight-bold">Written by wangjunwei <span><a target="_blank" href="https://weibo.com/u/5513861204" class="btn btn-outline-success btn-sm btn-round ml-2">Follow</a></span></h5>
						code rookie
					</div>
				</div>
                

            <!-- Comments -->
            
                <!--  Don't edit anything here. Set your disqus id in _config.yml -->

<div id="comments" class="mt-5">
    <div id="disqus_thread">
    </div>
    <script type="text/javascript">
        var disqus_shortname = 'wechaty'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>
    Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
</div>
            

		</div>


	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="/2020/10/12/puppet-padlocal-intro/"> <img height="30px" class="mr-1" src="https://wechaty.js.org/assets/2020/10-puppet-padlocal-intro-en/logo.webp">  New Wechaty Puppet Service: PadLocal</a>
            </div>
          
          
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="/2020/10/13/wechaty-puppet-douyin-final-term/"> 基于RPA封装的Wechaty接口下的抖音聊天机器人结项报告  <img height="30px" class="ml-1" src="https://wechaty.js.org/assets/2020/10-wechaty-puppet-douyin-final-term-en/wechaty-puppet-douyin-logo.webp"> </a>
            </div>
          
        </div>
    </div>
</div>

    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.loli.net/ajax/libs/popper.js/1.14.6/umd/popper.min.js" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <script src="/assets/js/theme.js"></script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <a href="#" class="text-muted navbar-brand mr-2 mb-0">
                  <strong>Wechaty</strong>
                </a>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script></span>
                |
                <a
                  class="text-muted"
                  target="_blank"
                  href="/branding/"
                >
                  Branding
                </a>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/wechaty"><i class="fab fa-github"></i> </a>

            </div>

            <div class="text-gray">
              Powered by
              <a
                class="text-gray font-weight-bold"
                target="_blank"
                href="https://www.wowthemes.net/mundana-jekyll-theme/"
              >
                Mundana Jekyll Theme
              </a>
              .
            </div>
        </div>
        </div>
    </footer>

    <!-- All this area goes before             <script>
                window.onload = function () {
                    var script = document.createElement('script');
                    var firstScript = document.getElementsByTagName('script')[0];
                    script.type = 'text/javascript';
                    script.async = true;
                    script.src = '/sw-register.js?v=' + Date.now();
                    firstScript.parentNode.insertBefore(script, firstScript);
                };
            </script>
            </body>
 closing tag -->


</body>

</html>
