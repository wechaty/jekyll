<!DOCTYPE html>
<html lang="en">
<head>
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PD2PL84');</script>
<!-- End Jekyll GTM tag v1.0.3 -->


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    

    <title>
      Summer 2020 [Go-wechaty Github Action optimization] Final POC | Wechaty
    </title>

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Summer 2020 [Go-wechaty Github Action optimization] Final POC | Wechaty</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Summer 2020 [Go-wechaty Github Action optimization] Final POC" />
<meta name="author" content="nebell" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Using Github Actions to optimize Go-wechaty related projects and improve user and developer experience" />
<meta property="og:description" content="Using Github Actions to optimize Go-wechaty related projects and improve user and developer experience" />
<link rel="canonical" href="https://wechaty.js.org/2020/09/27/go-wechaty-gh-actions-optimization-final-poc-en/" />
<meta property="og:url" content="https://wechaty.js.org/2020/09/27/go-wechaty-gh-actions-optimization-final-poc-en/" />
<meta property="og:site_name" content="Wechaty" />
<meta property="og:image" content="https://wechaty.js.org/assets/2020/09-go-wechaty-gh-actions-optimization-final-poc-en/header.webp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-27T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://wechaty.js.org/assets/2020/09-go-wechaty-gh-actions-optimization-final-poc-en/header.webp" />
<meta property="twitter:title" content="Summer 2020 [Go-wechaty Github Action optimization] Final POC" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"nebell"},"dateModified":"2020-09-27T00:00:00+00:00","datePublished":"2020-09-27T00:00:00+00:00","description":"Using Github Actions to optimize Go-wechaty related projects and improve user and developer experience","headline":"Summer 2020 [Go-wechaty Github Action optimization] Final POC","image":"https://wechaty.js.org/assets/2020/09-go-wechaty-gh-actions-optimization-final-poc-en/header.webp","mainEntityOfPage":{"@type":"WebPage","@id":"https://wechaty.js.org/2020/09/27/go-wechaty-gh-actions-optimization-final-poc-en/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://wechaty.js.org/assets/images/logo.png"},"name":"nebell"},"url":"https://wechaty.js.org/2020/09/27/go-wechaty-gh-actions-optimization-final-poc-en/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <link rel="manifest" href="/manifest.json">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://s3.pstatp.com/cdn/expire-1-M/font-awesome/5.3.1/css/all.css" crossorigin="anonymous">

    <!-- Google Fonts in China Thanks @crossly @sidny -->
    <link href="https://fonts.loli.net/css?family=Lora" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/assets/css/theme.css">

    <!-- Highlight Stylesheet -->
    <link rel="stylesheet" href="/assets/css/highlight.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://s0.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    




</head>

<body class="">
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PD2PL84"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Jekyll GTM tag v1.0.3 (noscript) -->


    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/"><strong>Wechaty</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
  <a class="nav-link" href="/news/">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/blog/">Blog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://ship.fail" target="_blank">Ship.Fail</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://preangel.ai" target="_blank">PreAngel.AI</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/docs/">Docs</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/contributors/">Contributors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/PMC#wechaty-committers" target="_blank">Talks</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/wechaty#readme" target="_blank">GitHub</a>
</li>


            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <li class="nav-item">
                  <a class="nav-link" href="/search/">Search</a>
                </li>
            </ul>
        </div>
    </div>
    </nav>

  <!-- Search results moved to a dedicated /search page -->

    <!-- Content -->
    <main role="main" class="site-content">
        

<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row  justify-content-between ">
				<div class=" col-md-6  pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
            <span class="catlist">

            
              <a class="sscroll text-danger" href="/categories.html#project">project</a><span class="sep">, </span>
            

            </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">Summer 2020 [Go-wechaty Github Action optimization] Final POC</h1>
					<div class="d-flex align-items-center">
                        
                          <a href="/contributors/nebell">
                            <img class="rounded-circle" src="/assets/contributors/nebell/avatar.webp" alt="Tang Guangbin" width="70"/>
                          </a>
                        
						<small class="ml-3"> <a href="/contributors/nebell">Tang Guangbin</a> <span><a target="_blank" href="" class="btn btn-outline-success btn-sm btn-round ml-1">Follow</a></span>
                            <span class="text-muted d-block mt-1">Sep 27, 2020 · <span class="reading-time">
  
  
    4 mins read
  
</span>
</span>
						</small>
					</div>
				</div>
                
				<div class="col-md-6 pr-0 align-self-center">
					<img class="rounded" src="/assets/2020/09-go-wechaty-gh-actions-optimization-final-poc-en/header.webp" alt="Summer 2020 [Go-wechaty Github Action optimization] Final POC">
				</div>
                
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">

    <!-- Share -->
<div class="col-lg-2 pr-4 mb-5 col-md-12">
  <div class="sticky-top sticky-top-offset text-center">
    <div class="text-muted">
    </div>
    <div class="share d-inline-block">
      <!-- AddToAny BEGIN -->
      <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
        <img id="qrcode" title="Wechat"
          src="/assets/contributors/wechaty/icon.png"
          width="64" height="64"
        />
        <a class="a2a_button_twitter" title='Twitter'></a>
        <a class="a2a_button_linkedin" title='LinkedIn'></a>
        <a class="a2a_button_facebook" title='FaceBook'></a>
        <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
      </div>
      <script async src="https://static.addtoany.com/menu/page.js"></script>
      <!-- AddToAny END -->
    </div>
  </div>
</div>

<script>
  var href = document.location.href
  var url = 'https://api.qrserver.com/v1/create-qr-code/?data='
            + href
            + '&size=512x512'
  var img = document.getElementById('qrcode')

  img.src=encodeURI(url)
</script>


		<div class="col-md-12 col-lg-8">

      <!-- Article -->
			<article class="article-post">
			<blockquote>
  <p>This is a translated version of the original Chinese post. You can find the original post <a href="/2020/09/27/go-wechaty-gh-actions-optimization-final-poc/">here</a>.</p>
</blockquote>

<hr />

<p>The “Open Source Promotion Plan - Summer 2020” (hereinafter referred to as Summer 2020) is a summer activity for college students jointly organized by the Institute of Software Chinese Academy of Sciences and the openEuler community.
It aims to encourage students to actively participate in the development and maintenance of open source software and promote the vigorous development of excellent domestic open source software communities.
According to the difficulty and completion of the project, participants can also receive activity bonuses and trophies from the “Open Source Promotion Plan - Summer 2020”.</p>

<p>Official website: <a href="https://isrc.iscas.ac.cn/summer2020">https://isrc.iscas.ac.cn/summer2020</a></p>

<p>Official news: <a href="http://www.iscas.ac.cn/xshd2016/xshy2016/202004/t20200426_5563484.html">http://www.iscas.ac.cn/xshd2016/xshy2016/202004/t20200426_5563484.html</a></p>

<p>This project [Go-wechaty Github Action optimization] is an open source project supported by Summer 2020.</p>

<h2 id="project-information">Project Information</h2>

<ul>
  <li>
    <p>Project Name: Go-wechaty Github Action optimization</p>
  </li>
  <li>
    <p>Project Description: Use Github Actions related features to optimize Go-wechaty related projects and improve the user and development experience.</p>
  </li>
  <li>
    <p>Timeline:</p>
    <ul>
      <li>July 1 to July 7: Read the documentation and source code of Go-wechaty and its plugins, conduct local manual compilation tests and compilation tests through Github Action continuous integration scripts.</li>
      <li>July 7 to July 14: Write Github Action scripts to update go-wechaty-getting-started dependencies and implement ding-dong compilation tests on Windows platform.</li>
      <li>July 14 to July 21: Explore other Github Action use cases and research optimization solutions for existing wechaty continuous integration solutions.</li>
      <li>August 1 to September 5: Improve Dockerfile and trigger conditions for Dispatch.</li>
    </ul>
  </li>
</ul>

<h2 id="project-summary">Project Summary</h2>

<ul>
  <li>Project Achievements:
    <ul>
      <li>Automatically update go-wechaty-getting-started dependencies to the latest version
        <ul>
          <li>Use <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/events-that-trigger-workflows#repository_dispatch">Repository Dispatch</a> to trigger Actions across repositories
            <ul>
              <li>Submit Pull-Request to go-wechaty-getting-started after update when conditions are met</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Completed ding-dong compilation test on Windows platform</li>
      <li>Completed ding-dong docker and pushed to Github Packages
        <ul>
          <li>Use multi-stage build to reduce image size</li>
          <li>Tested buildx</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Problems Encountered and Solutions:
    <ul>
      <li>While learning Docker, I tried to use buildx to build multiple platforms at once, but since Github Packages does not support multi-platform images, I switched to testing ghcr which went online in September.</li>
      <li>When testing go-wechaty, my understanding of trigger conditions was not deep enough. I personally thought it was logical to put sending dispatch as a step after compilation testing, and only used the <code class="language-plaintext highlighter-rouge">if:Contains()</code> statement to roughly determine whether it was a <code class="language-plaintext highlighter-rouge">Pull-Request</code> event to skip. After the mentor’s reminder, I realized that this was easy to cause confusion. I would like to thank Teacher Ding for the reminder.</li>
      <li>After the core goal of Github Actions optimization was achieved, optimization based on existing projects lost direction. Under the reminder of my mentor Teacher Ding, I turned to optimization of Dockerfile, learned relevant content, and multi-stage construction also reduced the image size and optimized the hands-on experience. Thanks again for the teacher’s guidance.</li>
    </ul>
  </li>
</ul>

<h3 id="video-report">Video Report</h3>

<div style="
    position: relative;
    padding-bottom: 70%;
    padding-top:30px;
    height:0;
    overflow:hidden;
">
  <iframe src="//player.bilibili.com/player.html?aid=244737639&amp;bvid=BV1cv411y7jY&amp;cid=239638372&amp;page=1&amp;high_quality=1" allowfullscreen="" webkitallowfullscreen="" frameborder="0" style="
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    ">
</iframe>

</div>

<h2 id="mentor-review">Mentor Review</h2>

<h3 id="review-subject">Review Subject</h3>

<ul>
  <li>Review Content: <em>Final Report</em></li>
  <li>Submitted by: <em>Tang Guangbin</em></li>
</ul>

<h3 id="review-results">Review Results</h3>

<ul>
  <li>Project Completion: <em>Completed the originally planned cross-project trigger CI and Docker image compilation work.</em></li>
  <li>Student Participation: <em>Cross-project triggers were fully completed by the student. The Docker compilation part was improved by the student with a new solution. Dockerfile was optimized under guidance.</em></li>
  <li>Code Contribution: <em>The CI/CD part of the new solution was fully completed by the student. The code volume involves 5%-10% of the open source project, but heroes should not be judged by code volume alone. CI/CD has positive significance for the entire open source project.</em></li>
  <li>Overall Evaluation and Suggestions:
    <ul>
      <li>Student Guangbin is able to actively expand his knowledge areas that he has not yet mastered, and can even actively explore new technical solutions in certain directions. This is a very important skill in work. I hope you can continue to expand your knowledge areas and be able to solve more unknown problems.</li>
      <li>I believe you have enough enthusiasm to solve technical issues, just as you mentioned in your summary that you are aware of the room for improvement in your technical skills. However, on the other hand, I hope you can gain more in open source, which can enable you to promote more improvements in project collaboration in your future work.</li>
    </ul>
  </li>
  <li>Final Review Result: <em>Passed</em></li>
</ul>

<hr />

<blockquote>
  <p>Chinese version of this post: <a href="/2020/09/27/go-wechaty-gh-actions-optimization-final-poc/">go wechaty gh actions optimization final poc</a></p>
</blockquote>

<hr />

<blockquote>
  <p>This is a translated version of the original Chinese post. You can find the original post <a href="/2020/09/27/go-wechaty-gh-actions-optimization-final-poc/">here</a>.</p>
</blockquote>

			</article>

			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#summer-of-wechaty">summer-of-wechaty</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#summer-2020">summer-2020</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#go">go</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#devops">devops</a>
				
				</span>
			</div>

            <!-- Mailchimp Subscribe Form -->
            
			<div class="border p-5 bg-lightblue">
				<div class="row justify-content-between">
					<div class="col-md-6 mb-2 mb-md-0">
						<h5 class="font-weight-bold">Join Newsletter</h5>
						 Get the latest news right in your inbox. We never spam!
					</div>
					<div class="col-md-6">
						<div class="row">
              <form action="https://zixia.us4.list-manage.com/subscribe/post?u=a8584b55dea5aa8bbc14bd1a0&amp;id=d9899f0d70" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate w-100" target="_blank" novalidate>
                <input type="email" placeholder="Enter e-mail address" name="EMAIL" class="required email form-control w-100" id="mce-EMAIL" autocomplete="on" required>
                <input type="text"  placeholder="Name"                 name="FNAME" class="required form-control w-100"       id="mce-FNAME" autocomplete="on" required>
                <button type="submit" value="Subscribe" name="subscribe" class="heart btn btn-success btn-block w-100 mt-2">Subscribe</button>
              </form>
						</div>
					</div>
				</div>
			</div>
            


             <!-- Author Box -->
                
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                        
                          <a href="/contributors/nebell">
                            <img class="rounded-circle" src="/assets/contributors/nebell/avatar.webp" alt="Tang Guangbin" width="90"/>
                          </a>
                        
					</div>
					<div class="col-md-10">
                        <h5 class="font-weight-bold">Written by <a href="/contributors/nebell">Tang Guangbin</a> </h5>
						A student.
					</div>
				</div>
                

            <!-- Comments -->
            
                <!--  Giscus embeds GitHub Discussions for per-post comments. Configuration intentionally hard-coded. -->

<div id="comments" class="mt-5">
    <script src="https://giscus.app/client.js"
            data-repo="wechaty/js.org"
            data-repo-id="R_kgDOHF4w6Q"
            data-category="General"
            data-category-id="DIC_kwDOHF4w6c4Cx6g7"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="1"
            data-input-position="bottom"
            data-theme="light"
            data-lang="en"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>
        Comments require JavaScript. You can also join the discussion on our
        <a href="https://github.com/wechaty/js.org/discussions/categories/general" rel="noopener" target="_blank">GitHub Discussions</a> page.
    </noscript>
</div>

            

		</div>


	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="/2020/09/26/wechaty-words-per-day-plugin-final/"> <img height="30px" class="mr-1" src="https://wechaty.js.org/assets/2020/09-wechaty-words-per-day-plugin-final-en/logo.webp">  暑期2020 [编写一个“每日一句”插件] 结项报告</a>
            </div>
          
          
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="/2020/09/27/go-wechaty-gh-actions-optimization-final-poc/"> 暑期2020 [Go-wechaty Github Action optimization] 结项 POC  <img height="30px" class="ml-1" src="https://wechaty.js.org/assets/2020/09-go-wechaty-gh-actions-optimization-final-poc-en/header.webp"> </a>
            </div>
          
        </div>
    </div>
</div>

    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.loli.net/ajax/libs/popper.js/1.14.6/umd/popper.min.js" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <script src="/assets/js/theme.js"></script>

  





    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <a href="#" class="text-muted navbar-brand mr-2 mb-0">
                  <strong>Wechaty</strong>
                </a>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script></span>
                |
                <a
                  class="text-muted"
                  target="_blank"
                  href="/branding/"
                >
                  Branding
                </a>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/wechaty"><i class="fab fa-github"></i> </a>

            </div>

            <div class="text-gray">
              Powered by
              <a
                class="text-gray font-weight-bold"
                target="_blank"
                href="https://www.wowthemes.net/mundana-jekyll-theme/"
              >
                Mundana Jekyll Theme
              </a>
              .
            </div>
        </div>
        </div>
    </footer>

    <!-- All this area goes before             <script>
                window.onload = function () {
                    var script = document.createElement('script');
                    var firstScript = document.getElementsByTagName('script')[0];
                    script.type = 'text/javascript';
                    script.async = true;
                    script.src = '/sw-register.js?v=' + Date.now();
                    firstScript.parentNode.insertBefore(script, firstScript);
                };
            </script>
            </body>
 closing tag -->


</body>

</html>
