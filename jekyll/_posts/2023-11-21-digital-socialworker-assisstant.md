---
title: "wechaty+LLM 助力基层社区自治"
author: bigbrother666
categories: article
tags:
  - workpro
  - LLM
  - agent
image: /assets/2023/11-digital-socialworker-assisstant/0.webp
---

当居委会遇到wechaty+大模型……

## 缘起

2022年上海疫情封控期间， 我们几个小伙伴有幸以“IT志愿者”的身份帮助到了两个小区的志愿者团队（有关这段经历： [同心助力，战役有AI!](https://wechaty.js.org/2022/05/20/wechaty-ai-antigenbot/)）。

没想到封控解除后，我们的这个工作引起了政府部门的兴趣，于是开启了我们与静安区临汾路街道长达一年的合作。

## 数字社工助理

长期以来，作为直接服务包括你我在内的每一名居民的村/居委会都免不了被诟病“不给力”，尤其在疫情封控这种特殊场景下，其不足之处更是暴露无遗。而实际上这背后有着复杂的原因：

村/居委会并不属于政府机构，而是“村/居民自治组织”，但是在我国目前的行政大环境下，它又不得不承担起政府的部分职能，比如社区管理、基层治理等等。这种”既不是政府，又不得不承担政府职能”的矛盾，导致了村/居委会的工作效率和服务质量都不尽如人意。

以上海为例，一个居委会通常由5~9名社工组成，但需要对接3500~5000名居民，平均每个社工对接400~500人……但其日常工作却多达119项。（下图来自公众号”上海大调研”）

![matrtial1](/assets/2023/11-digital-socialworker-assisstant/1.webp)

这背后其实是复杂的基层社区自治问题，尤其是在我国政体的大背景下。学术界对此其实有很多论述和研究，从中央到地方的各级政府也一直在出台各种改革措施，但期望一蹴而就也不现实，村/居委会人少事多、能力不足的情况并不能马上彻底解决。
在这种情况下，引入AI技术，辅助社工的工作，就很有意义了。

## 微信对话机器人的共识

整个系统使用微信对话机器人，而非传统的网页或者app，甚至不使用公众号和小程序，这一点是从合作初期就确定的，事实上这也是最吸引临汾路街道的地方之一，因为社工大部分不具有特别高的IT技能，且日常工作已经非常繁重，根本没有时间去学习、适应新的工具，所以我们的产品必须要能够"零学习成本"；
另一方面现实中基层的社工，无论是与居民的交流，还是接收上级的指示、通知等，这些工作其实就是通过微信完成的（很多各个部委斥巨资开发的系统，在居委会中都是“吃灰”状态，因为你不能要求社工面对居民的问题，现去找一台电脑，打开一个界面，登录后再去执行一系列繁琐的操作……）。

这种情况下，微信对话机器人无疑就是最好的选择： 最自然的操作界面，无需下载任何软件，添加好友就能使用……

在达成这个共识后，起初我们是想基于个人微信做开发，因为很多已经存在的工作群、居民群都是个人微信群，如果使用企业微信的话，还是有一些迁移成本的。
但实践下来发现，个微还是有很多限制的，比如不止一次碰到了因为短期内发送20条以上相同内容的信息而触发24小时禁言……
同时考虑正规性等因素，最终客户还是被我们说服承担一些迁移成本，改用企业微信，并为此新认证了组织（不知道企微是不是考虑给我们点推广费）。

在迁移过程中，句子互动给予了很大支持，初期的wxwork协议还有些不太稳定，基本上一个月要重启一次，升级为workpro后，经历了几个月的打磨，自今年5月份以来，整个系统就非常稳了，连续运行数月也没有任何问题。

## 198个文档的痛苦

我们合作的静安区临汾路街道下辖20个居委会，近200名社工。上文提到，其日常工作多达119项。

接触后我们发现，其实这些年上海市政府一直在推动居委会自治能力的提升，临汾路街道甚至为这119项工作编写了详细的工作手册，也就是我们熟悉的SOP。
他们一共有198份word文档，清晰而详细的表明了每一项工作的归属单位、办理条件、所需材料以及办事流程等，事实上，这已经完全涵盖了居民日常生活的方方面面，但问题是没有哪个社工能够熟悉记忆这198个文档的详细内容，遇到问题手动查找又非常繁琐耗时。并且文档上使用的是书面用词，而居民提问往往是口语，
举个例子，经常提到的“经适房”，标准政务用语是“共有产权保障住房”。另外，居民提问措辞方式也与书面文档有很大不同，比如书面文档只会写“社保卡补办流程”，但现实中居民的提问更可能是：“我社保卡掉了怎么办？”（上海话中"掉了"="丢了"）。
……这些都客观上增加了社工们使用SOP文档的难度。

针对这个问题，我们采集了并标注了400多条居民实际提问用例，并经过数据增强，在开源的rocketqa模型基础上为本项目微调了专属的问答匹配模型，最终结合wechaty，实现了数字社工助理的第一个功能：智能SOP文档问答。从此198个文档的痛苦再也不存在了。

![matrtial2](/assets/2023/11-digital-socialworker-assisstant/3.webp)

上线后实测效果还是很不错的，甚至直接微信语音提问也能获得很准确的回答。

![matrtial3](/assets/2023/11-digital-socialworker-assisstant/2.webp)

## 一句话生成的活动策划报告

在完成了智能SOP问答后，临汾路街道又提出了第二个需求——一句话生成活动策划报告。

原来，目前居委会50%的工作量是组织各类居民活动，这些活动有些是为了完成相应的宣传工作，比如每年都有的建党节、建军节、消防灭火宣传，所在区域的政策宣传，如垃圾分类、文明城市创建等……有一些则是相关的文化活动，比如端午节组织包粽子，儿童节组织儿童画展，中秋节组织赏月……
我们也是接触后才了解，这些看似没啥实际意义的文化活动其实很有必要，现代生活，邻里之间的交流很少，很多人都不知道自己的邻居是谁，这些活动就是为了让居民们有机会聚在一起，增进邻里之间的感情，很多居民间的矛盾原来无法调节，但是一起参加一次活动后就有了调节空间，而居委会也需要通过这些活动拉近与居民的距离，这样未来需要他们出面做各种说服工作也才有感情基础。

但是居委会每次组织活动都需要写一份策划案申请，这个工作对于很多社工来说，属于“不得不完成”的事情，另外时间长了，社工们也面临着“活动创意穷尽”的问题……

接到这个需求后，我们马上想到了大模型。这确实是一个可以真实发挥大模型价值的场景。适逢在4、5月份，行业迎来了LLM的大爆发，我们的选择很多。我们首先根据需求，结合报告的模板要求，设计了prompt，然后比较了多个开源模型和商用大模型API的效果，最后综合生成质量、速度以及成本，并充分考虑了政务系统数据安全性的特殊要求， 选择了本地部署ChatGLM2-6B作为最终的方案。

![matrtial4](/assets/2023/11-digital-socialworker-assisstant/4.webp)

**最后，放一下产品视频吧：**

{% include iframe.html src="https://www.bilibili.com/video/BV1x94y1H7yE/?vd_source=a9a9b3058af6573c5ad2ff31c387fa44" %}

## 项目收到主流媒体的广泛报道

“数字社工助理”上线后，不仅得到了社工们的广泛好评，也吸引了多家专业媒体的报道，这对团队来说也是一种鼓励。

![matrtial5](/assets/2023/11-digital-socialworker-assisstant/5.webp)

## 写在最后的话

通过一年多近距离与临汾路街道的接触，我们真实感受到了什么叫"上头千根线，下面一根针"，基层工作确实不好做，我们很开心能够为此些许助力。

不过也必须承认此项目有一定的偶然性，首先项目所在地上海本身就是中国目前政务理念最开明的地区，然后临汾路街道又是全国政务信息化的示范单位，与我们对接的负责人大学专业就是计算机，对新技术有一定的敏感度，这些都是难以复制的因素。

我们也在2023年夏季尝试将此项目进行推广，但并不成功，这里面不存在技术问题，甚至也不存在商务问题（大部分有意向使用该系统的街镇都是有能力承担每年十几万的费用的），更多的阻力来自政务领域的特殊性。当然，另一个很大的因素是，团队至今都只是兼职，在市场和推广上其实也没有投入足够的精力。

但无论如何，我们还是认为这个工作是有价值的，所以我们也在讨论将这个产品进行开源，同时服务更多的自治性组织，我们相信：借科技之力，是可以最大化降低组织的管理工作量的，而管理人员占比的降低是自治的必要条件之一！
