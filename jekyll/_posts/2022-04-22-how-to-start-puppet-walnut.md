---
title: "2022-å°ç™½å¦‚ä½•ä»0åˆ°1ä¸Šæ‰‹puppet-walnut"
author: fabian
categories:
  - project
image: /assets/2022/04-how-to-start-puppet-walnut/puppet-walnut.webp
tags:
  - 5g
  - puppet-walnut
  - chatbot
  - ecosystem
---

## å°ç™½å¦‚ä½•ä»0åˆ°1ä¸Šæ‰‹puppet-walnut

> ä»Šå¤©å’Œå¤§å®¶åˆ†äº«ä»æœªæ¥è§¦è¿‡5Gæ¶ˆæ¯å¼€å‘çš„å°ç™½å¦‚ä½•ä»0åˆ°1çš„ç”³è¯·åˆ°5Gæ¶ˆæ¯çš„æµ‹è¯•è´¦å·ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Wechatyç¤¾åŒºä¸­çš„walnut puppetæ¥å®ç°5Gæ¶ˆæ¯çš„ä¸€äº›åŠŸèƒ½ã€‚

### ä¸€. è¿›å…¥ç¡¬æ ¸æ¡ƒ5Gå¼€å‘è€…ç¤¾åŒºè¿›è¡Œè´¦å·çš„æ³¨å†Œ

#### 1. ç‚¹å‡»[ç½‘å€é“¾æ¥](https://www.5g-msg.com/#/)è¿›å…¥ç¡¬æ ¸æ¡ƒ5Gå¼€å‘è€…ç¤¾åŒºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡»ç½‘é¡µä¸­çš„ã€Œå…è´¹æ³¨å†Œã€æŒ‰é’®

![img](https://user-images.githubusercontent.com/60428924/164723111-850f799d-a562-47f2-bcb1-8cecc01a088b.png)

#### 2. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¾“å…¥è´¦æˆ·åã€å¯†ç ã€æ‰‹æœºå·è¿›è¡Œç›¸å…³æ³¨å†Œ

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NDgzYmE4NzM0NDJjMDM5ODMyNGJlODMwODc3YjdkNjJfNmFJbWxDSWpsWUFHNzIzS2NXYlEwMVZjeUdXTjFOYVRfVG9rZW46Ym94Y25lQWZVOW9GOGxJME9RdzVTWFhMWXNoXzE2NTA2MjE3OTE6MTY1MDYyNTM5MV9WNA)

#### 3. å¦‚ä¸‹å›¾ï¼Œè¾“å…¥æ‰‹æœºçŸ­ä¿¡éªŒè¯ç 

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmNlN2UzYWE4NmQ5ZTYwNGQ2NjQ4ODZjMjU4NjY4MzdfanRra0xLNURHdWp2MUZBaGx5UXY1V1JQYmVMYTNuSVBfVG9rZW46Ym94Y25HakxKbnA2Znl1NFdVZjY1M0swMjdiXzE2NTA2MjE3OTE6MTY1MDYyNTM5MV9WNA)

#### 4. æ³¨å†ŒæˆåŠŸï¼å¦‚æœæ€•å¿˜è®°å¯†ç ï¼Œå¯ä»¥å†ç»‘å®šä¸€ä¸ªé‚®ç®±~ï¼ˆç»‘å®šé‚®ç®±çš„æ“ä½œæ­¤å¤„å¿½ç•¥ï¼‰

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNlZjQ3OTgyYWIzZTJiM2E4NmMzZmI4NDFmYWNjZTdfZDZRcVdsYTh0TGhCOTRxdm9iMWhKeVdvT3o3S2FkNVRfVG9rZW46Ym94Y25zbEVJS0dNc1VjdGZiM0lyRTF1NnJlXzE2NTA2MjY0NTg6MTY1MDYzMDA1OF9WNA)

### äºŒ. æŠ¥åå‚åŠ â€œå¯èˆªè®¡åˆ’â€å¼€å‘è€…å¤§èµ›

> åœ¨å®Œæˆç¬¬ä¸€æ­¥çš„è´¦å·æ³¨å†Œåï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªç¡¬æ ¸æ¡ƒ5Gå¼€å‘è€…ç¤¾åŒºçš„è´¦å·

#### 1. ç™»é™†ç¬¬ä¸€æ­¥æ³¨å†Œçš„è´¦å·ä¹‹åï¼Œç‚¹å‡»ã€Œâ€œå¯èˆªè®¡åˆ’â€å¼€å‘è€…å¤§èµ›ã€è¿›å…¥ç›¸å…³æ´»åŠ¨ç•Œé¢

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NGY1MTBlOGMxYmQxNjFkZjFhYzlmNzcxZGViZTNiY2FfVkZmTExScDBBaTcwaTVNRHBmVjVNRTB3TDZ0dnRZZ1VfVG9rZW46Ym94Y25idGdGTnlEcWs0eEVONHZXV21jdUpYXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 2. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œç«‹å³æŠ¥åã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY5ZDkyZmFhN2E3MTgxYzg2ZmQ1YzRhYTI2MWU2NjFfWm1lRk5zZnczbkEyVUNDa2RrVkRPYmdWcWNBU2xyd1lfVG9rZW46Ym94Y25qOEJ0WnFOMnVtdXlyR2Vxdm9IOFBlXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 3. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¡«å†™å‚èµ›ç›¸å…³ä¿¡æ¯ï¼ˆå¦‚æœ‰é‚€è¯·ç è¯·å¡«å†™é‚€è¯·ç ï¼Œæ²¡æœ‰å¯ä¸å¡«ï¼‰ï¼Œå¡«å†™å®Œæ¯•ä¹‹åç‚¹å‡»ã€Œæäº¤ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=MzJmYjhmODg3OTU3YmIwYTUzZTg4OTQ2ZWM5NDk2ZGNfZ2UzZzJUZnFpcFBFcDNnMm9LVmxJaHZqbVR0ZE5lM3FfVG9rZW46Ym94Y25FZHJzN2FSeVl3TjFtT1p1REFWSVJoXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 4. æŠ¥åæˆåŠŸï¼

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NzNiMzZiMGRjMTkwNzg0NDQ4Y2Q5ODZiNWE2ZjUxZjdfV1RmZUFxMkQ2Wk9zRmtQM2ZSbUljOEJ6SlFOM29ldDlfVG9rZW46Ym94Y25XWmJNUGRoWUpiZURWU0xWankzcHpjXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

### ä¸‰ã€ç”³è¯·è¯•ç”¨ç¡¬æ ¸æ¡ƒå¼€å‘å¥—ä»¶

#### 1. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œé¦–é¡µã€æŒ‰é’®å›åˆ°é¦–é¡µ

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmRkYjg4NGM1M2JmNTdjYTUzMWMyNTk0N2IxMjU2YWRfbm1vd0tGS29Vd05DbWlUZklaZUN6OHdsSm5uWDNDdlRfVG9rZW46Ym94Y25qUTY4ZlZ0VHpubEhZbTh0U1lRRUxoXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 2. ä»é¦–é¡µç•Œé¢ä¸‹æ‹‰ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡»ä¸‹å›¾æ‰€ç¤ºçš„ã€Œç”³è¯·è¯•ç”¨ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmVlNmU4ODdiNTZlY2Y2Yzk2YjFiNWFlMzFiZTgyMWVfd3g5NWNsYjdveGViNjhlR05aUHN2STBSRlBqU3hkMUpfVG9rZW46Ym94Y254QjlHMHZkRDZSQmFmTXlEN2h6MDFnXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 3. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œå…è´¹è¯•ç”¨ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NWMwMTk2YTU2YzkwZDdmNDViYTExNDI0NGM2ZjYxYzRfaEg5V2xNREkxaXJrUDMxVDlWbXgxOEl6TE1xVjBNalJfVG9rZW46Ym94Y255Vk1Sd29VMWJnNm85VVBxY1lXSUFkXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 4. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œæäº¤ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=OTc4MzNhNmJkNDUzZWZiNzVmNjNjZmZiZmYyNjM1NjJfRFVHeWhNc0pXNjJkeU1nS0V1MFlvYW04dllnaVdJTTZfVG9rZW46Ym94Y25WU1hUdW5OSkhwRnZWUjM3S01LaEtiXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 5. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œå»è®¤è¯ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=M2FhNTdkOWFmZGVhMDNlZTAyZDc0NTBiMGJkN2M5NGNfbjJINGpFTG9DQVo1TlJPOFBZbGlpcTBLZWJqRWJTRUtfVG9rZW46Ym94Y25Gcmlzd0tJcU16TGVaZzlWdGFqcXMwXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 6. ç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œå‰å»è®¤è¯ã€æŒ‰é’®å¯¹è´¦æˆ·è¿›è¡Œå®åè®¤è¯

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NTg1YTAyODQwNzcyOTA1NmQxNjMwZTUwY2NiYTNhYWRfdThvekE5STN3Tmpuc1RLTHd5SnN3blBwaFYzUGFRZDhfVG9rZW46Ym94Y25vcEppQkFhRXJ2QkJabXpabTVKUmNkXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 7. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¡«å†™ç›¸å…³èµ„æ–™è¿›è¡Œè´¦æˆ·å®åè®¤è¯

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTk0MjU0MDE2MzBmZDEzZjczYTcyYWMxYzA4ZTAwZWRfeklWRnM3c09OMkVreFBWdVVmUUlpZktLNUVJTzdrV2NfVG9rZW46Ym94Y25sZHJQb3IzYUgwN0tOUlJkdTdJOWxlXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 8. èµ„æ–™æäº¤æˆåŠŸåï¼Œè´¦æˆ·å®åè®¤è¯çŠ¶æ€ä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºå˜ä¸ºã€Œå¾…å®¡æ ¸ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NTRjYzE4NGY5MDJlMTQ5MThhMGQ5MzJiMDU5ODEzNjBfZjdtMEh2cjVKZXppUjdRaU41NERURXdESkVldjJqVDJfVG9rZW46Ym94Y25ZbXFoZ2lPMzc3NTRIVHVxYzJCTVplXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 9. å¦‚æœæäº¤çš„èµ„æ–™æ²¡é—®é¢˜ï¼Œç­‰å¾…30åˆ†é’Ÿä¹‹å†…ï¼Œè®¤è¯çŠ¶æ€ä¼šå˜ä¸ºã€Œè®¤è¯é€šè¿‡ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=OTU2NGI0ZGQ5NTcxZjEyN2VjYWMzNGEyZGRmZDBmOTlfZUZNZ1h3UlZkTjZDQzRBd0g1WDBLcVBXRWphZ2ZLZFFfVG9rZW46Ym94Y254UWlmblZ3Q1BUb3JFOUZUa1hRZ1lnXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 10. æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ç”³è¯·ä¼ä¸šè´¦å·è®¤è¯ï¼Œç‚¹å‡»ä¸‹å›¾ä¸­çš„ã€Œå‰å»è®¤è¯ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=YWNiYWQ1NTk4M2UxNzcwOTQ0MmNhNjFmZjRmOTZjN2VfVFBVQjRTZXc1Z0J6Nml3WjFXRU5lUkd6TERYZXhSdEVfVG9rZW46Ym94Y255RFVJV2w5dGFpVG1aNWROTmx5dElKXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 11. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¡«å†™ç›¸å…³èµ„æ–™è¿›è¡Œä¼ä¸šè´¦å·è®¤è¯

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg0M2U3YzFiODQ5ZjQzMjA3ZTY4OTcwMjVjODQ5YzJfNGJRZVBsRVkxS2U3aG5DYjNNZnB3ZndjM2ozSDFkWXJfVG9rZW46Ym94Y25SOFpodXpHc21qakp4R2VqbnU4aE1lXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 12. èµ„æ–™æäº¤æˆåŠŸåï¼Œä¼ä¸šè´¦å·è®¤è¯çŠ¶æ€ä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºå˜ä¸ºã€Œå¾…å®¡æ ¸ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NzFhOWFkMzdmZWQzYTc3Yjk0ZjE3MzNmZjU4ZGIyYTlfV0FPTWl3NlZJdTAzRG9pQ2U4V09yRFVWSXBUYkl1VWlfVG9rZW46Ym94Y25kRlM4MjQzc2FNOHF4WURqMU5HUkxjXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 13. å¦‚æœæäº¤çš„èµ„æ–™æ²¡é—®é¢˜ï¼Œç­‰å¾…30åˆ†é’Ÿä¹‹å†…ï¼Œè®¤è¯çŠ¶æ€ä¼šå˜ä¸ºã€Œè®¤è¯é€šè¿‡ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=OTI2MjQwYzU4ZWVhMDVmMDUwZDdjNmQ0Njg2YmZhNTRfM2dIWm1qU3pLcFBGM2NZN0xsVVVxc0NjRmVpaWMwZ2FfVG9rZW46Ym94Y253RFk5d1Q4UE9la2pDbjRzanhqcnViXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 14. ç‚¹å‡»ã€Œç¡¬æ ¸æ¡ƒå¼€å‘å¥—ä»¶ã€æŒ‰é’®å›åˆ°ä¸‹å›¾ä¸­çš„ç•Œé¢ï¼Œç‚¹å‡»ã€Œæäº¤ã€

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NDg2ZjQ4ZDFmMDYwMTkwOGZlYzM2ODc3Y2NjODM4MDVfc1NkUHFBaEhsa0JBampBOFozbzJROURLa1l2bWJZaWVfVG9rZW46Ym94Y25ycmloOUVMaHhpbVg0V3M0QTZ6ZHpoXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

#### 15. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¡«å†™ç›¸å…³èµ„æ–™åç‚¹å‡»ã€Œæäº¤ã€æŒ‰é’®

![img](https://juzihudong.feishu.cn/space/api/box/stream/download/asynccode/?code=NjEyNWU2OGRmY2I1N2U3NWViOTgwMDRhZmIwZDlmNzBfd3A2d0F3UGtoM2FMbWZDZ3Yyenk2RFlsblIzNzZqMFpfVG9rZW46Ym94Y241cTR6WEVqSlI0WUtjdlhMRlFzbWZlXzE2NTA2MzM5ODk6MTY1MDYzNzU4OV9WNA)

### å››. **å¼€å§‹æ¥å…¥Wechatyç¤¾åŒºçš„puppet-walnut**

> åœ¨å®Œæˆç¬¬äºŒæ­¥çš„ç¡¬æ ¸æ¡ƒå¼€å‘è€…å¥—ä»¶ç”³è¯·è¯•ç”¨åï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä»ç¡¬æ ¸æ¡ƒ5Gå¼€å‘è€…ç¤¾åŒºç”³è¯·åˆ°çš„Chatbotçš„AppIdã€Chatbotçš„AppKeyã€Chatbotçš„sipIdã€‚ä¸ŠæŠ¥å¡«æŠ¥chatbotçš„å…¬ç½‘å›è°ƒåœ°å€

#### 1. è®¾ç½®ç¯å¢ƒå˜é‡

- Windows

  ```bash
  set WECHATY_LOG=verbose
  set WECHATY_PUPPET=wechaty-puppet-walnut
  set WECHATY_PUPPET_WALNUT_APPID=Chatbotçš„AppId
  set WECHATY_PUPPET_WALNUT_APPKEY=Chatbotçš„AppKey
  set WECHATY_PUPPET_WALNUT_SIPID=Chatbotçš„sipId
  ```
  
- Linux & MacOs

  ```bash
  export WECHATY_LOG=verbose
  export WECHATY_PUPPET=wechaty-puppet-walnut
  export WECHATY_PUPPET_WALNUT_APPID=Chatbotçš„AppId
  export WECHATY_PUPPET_WALNUT_APPKEY=Chatbotçš„AppKey
  export WECHATY_PUPPET_WALNUT_SIPID=Chatbotçš„sipId
  ```
  
#### 2. å®‰è£…ä¾èµ–

> 1. Node.js version 16+
> 2. NPM version 7+
> 3. TypeScript version 4.4+

```bash
npm install wechaty
npm install wechaty-puppet-walnut
```

#### 3. é…ç½®å…¬ç½‘æ˜ å°„ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

å°†æˆ‘ä»¬ä¹‹å‰ä¸ŠæŠ¥çš„å…¬ç½‘å›è°ƒåœ°å€**æ˜ å°„åˆ°æˆ‘ä»¬æœ¬åœ°çš„3000ç«¯å£**å³å¯ã€‚

> è¿™è¾¹æ¨èä½¿ç”¨å¼€æºçš„frpå·¥å…· 
>
> - Github repo:  <https://github.com/fatedier/frp> 
> - æ•™ç¨‹ğŸ‘‰ <https://fabian4.site/blog/22217.html>
>
> walnutä¸­åŒ…å«ä¸€ä¸ª**koa**çš„æœåŠ¡ é»˜è®¤ç›‘å¬ç«¯å£ä¸º3000ï¼ˆå¯åœ¨å¯åŠ¨é…ç½®ä¸­æ›´æ”¹ï¼‰

#### 4. ä½¿ç”¨ç¤ºä¾‹

##### (1). åˆ›å»ºå®ä¾‹

```ts
const bot = WechatyBuilder.build({
  puppet: new PuppetWalnut(),
})  // get a Wechaty instance
  .on('login', (user: any) => log.info(`User ${user} logged in`))
    // get the message chatbot received from users
  .on('message', async (message: Message) => {
    log.info(`Message: ${message}`)
  })

await bot.start()

const contact = await bot.Contact.find({ id: 'xxxxxxxxxxx' })
```

##### (2). æ–‡æœ¬æ¶ˆæ¯

```ts
await contact.say('This is a simple text message.')
```

![text-message](https://user-images.githubusercontent.com/60428924/163546259-67dfa5a1-521a-4d87-bfbf-af4e09dabf7e.jpg)

##### (3). å›¾ç‰‡æ¶ˆæ¯

```ts
contact.say(FileBox.fromFile('C:\\Users\\Desktop\\1.png'))
```

![image-message](https://user-images.githubusercontent.com/60428924/163546352-1d573b86-65ee-474e-baf3-008ffe608a8d.jpg)

##### (4). å¯Œæ–‡æœ¬æ¶ˆæ¯

```ts
const post = await bot.Post.builder()
  .add('This is a single rich card.')
  .add('This is the description of the rich card. It\'s the first field that will be truncated if it exceeds the maximum width or height of a card.')
  .add(FileBox.fromFile('C:\\Users\\Desktop\\1.png'))
  .type(PUPPET.types.Post.Unspecified)
  .build()

await contact.say(post)
```

![post-message](https://user-images.githubusercontent.com/60428924/163787857-fcde1562-c021-4e80-8a10-238e9615e3c7.jpg)

#### 6. æ¶ˆæ¯æ”¯æŒ

> æœ€æ–°æ”¯æŒæƒ…å†µè¯·å‚è€ƒ <https://github.com/wechaty/puppet-walnut#%E6%B6%88%E6%81%AF%E7%A7%8D%E7%B1%BB%E6%94%AF%E6%8C%81>

| æ¶ˆæ¯ç±»å‹   | ä»å±(æ ¹æ®æ¥å£è¿”å›) | api                    | æ¥æ”¶ | å‘é€ | ç¾¤èŠ |
| ---------- | ------------------ | ---------------------- | ---- | ---- | ---- |
| æ–‡æœ¬       | `text`             | `message.text`         | âœ…    | âœ…    | âŒ    |
| å›¾ç‰‡       | `image`            | `message.toImage()`    | âœ…    | âœ…    | âŒ    |
| è§†é¢‘       | `video`            | `message.toFilebox()`  | âœ…    | âŒ    | âŒ    |
| éŸ³é¢‘       | `audio`            | `message.toFilebox()`  | âœ…    | âŒ    | âŒ    |
| ä½ç½®       | `location`         | `message.toLocation()` | âŒ    | âŒ    | âŒ    |
| æ–‡ä»¶       | `other`            | `message.toFilebox()`  | âœ…    | âŒ    | âŒ    |
| è”ç³»äºº     | `other`            | `message.toContact()`  | âœ…    | âŒ    | âŒ    |
| å¯Œæ–‡æœ¬å¡ç‰‡ | `post`             | `message.toPost()`     | âŒ    | âœ…    | âŒ    |

#### 7. Wechaty Apiæ”¯æŒ

> æœ€æ–°æ”¯æŒæƒ…å†µè¯·å‚è€ƒ <https://github.com/wechaty/puppet-walnut#wechaty-api-%E6%94%AF%E6%8C%81>

##### (1). Contact

- #### [Properties](https://wechaty.js.org/docs/api/contact#properties)

  | Name | Type     | Description                                                  | Support | Details      |
  | ---- | -------- | ------------------------------------------------------------ | ------- | ------------ |
  | id   | `string` | Get Contact id. This function is depending on the Puppet Implementation, see [puppet-compatible-table](https://github.com/wechaty/wechaty/wiki/Puppet#3-puppet-compatible-table) | âœ…       | Phone number |

- #### [Instance Methods](https://wechaty.js.org/docs/api/contact#instance-methods)

  | Instance Methods             | Return type                                                  | Support | Details               |
  | ---------------------------- | ------------------------------------------------------------ | ------- | --------------------- |
  | say(text Or Contact Or File) | `Promise`                                                    | âœ…       | âš Contact not Support  |
  | name()                       | `String`                                                     | âœ…       | Phone number          |
  | alias(newAlias)              | `Promise`                                                    | âœ…       |                       |
  | friend()                     | `Boolean or null`                                            | âœ…       | True                  |
  | type()                       | `ContactType.Unknown or ContactType.Personal or ContactType.Official` | âœ…       | ContactType.Personal  |
  | gender()                     | `ContactGender.Unknown or ContactGender.Male or ContactGender.Female` | âœ…       | ContactGender.Unknown |
  | province()                   | `String or null`                                             | âŒ       |                       |
  | city()                       | `String or null`                                             | âŒ       |                       |
  | avatar()                     | `Promise`                                                    | âœ…       | Default avatar        |
  | sync()                       | `Promise`                                                    | âœ…       |                       |
  | self()                       | `Boolean`                                                    | âœ…       |                       |

  > Default avatar ğŸ‘‰ <https://raw.githubusercontent.com/wechaty/puppet-walnut/main/docs/images/avatar.webp>

- #### [Static Methods](https://wechaty.js.org/docs/api/contact#static-methods)

  | Static Methods            | Return Type                 | Support | Detail |
  | ------------------------- | --------------------------- | ------- | ------ |
  | find(query)               | `Promise <Contact \| null>` | âœ…       |        |
  | findAll(Query Arguements) | `Promise <Contact []>`      | âœ…       |        |

##### (2). Message

- #### [Instance Methods](https://wechaty.js.org/docs/api/message#instance-methods)

  | Instance methods             | Return type         | Support | Detail               |
  | ---------------------------- | ------------------- | ------- | -------------------- |
  | talker()                     | `Contact` or `null` | âœ…       |                      |
  | to()                         | `Contact` or `null` | âœ…       |                      |
  | room()                       | `Room` or `null`    | âœ…       | null                 |
  | text()                       | `string`            | âœ…       |                      |
  | say(text Or Contact Or File) | `Promise`           | âœ…       | âš Contact not Support |
  | type()                       | `MessageType`       | âœ…       | Message.Text         |
  | self()                       | `boolean`           | âœ…       |                      |
  | mention()                    | `Promise`           | âŒ       |                      |
  | mentionSelf()                | `Promise`           | âŒ       |                      |
  | forward(to)                  | `Promise`           | âœ…       |                      |
  | date()                       | `Date`              | âœ…       |                      |
  | age()                        | `Number`            | âœ…       |                      |
  | toFileBox()                  | `Promise`           | âœ…       |                      |
  | toContact()                  | `Promise`           | âœ…       |                      |
  | toUrlLink()                  | `Promise`           | âœ…       |                      |

- #### [Static Method](https://wechaty.js.org/docs/api/message#static-method)

  | Static Methods | Return type | Support | Detail |
  | -------------- | ----------- | ------- | ------ |
  | find()         | `Promise`   | âœ…       |        |
  | findAll()      | `Promise`   | âœ…       |        |

> Author: [@fabian](https://github.com/fabian4)
