<!DOCTYPE html>
<html lang="en">
<head>
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PD2PL84');</script>
<!-- End Jekyll GTM tag v1.0.3 -->


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    

    <title>
      An interesting weekend with Wechaty | Wechaty
    </title>

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>An interesting weekend with Wechaty | Wechaty</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="An interesting weekend with Wechaty" />
<meta name="author" content="tingyinhelen" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Thanks for inviting me to write this article that give me a chance to share my story for each other. And Wechaty is a very awesome library that is powerful and easy to use. The most important point is that is interesting for Wechat users and developers. Last week, I want to help my friend to make a chat bot. Because she is a manager of a technic community and she is also a owner of a chat group. In her daily life, many people add her to be the bunny on wechat. Then she needs add these persons into wechat group. It is a manual work, right? So I want to help her to lessen workload. So I ready to use wechaty." />
<meta property="og:description" content="Thanks for inviting me to write this article that give me a chance to share my story for each other. And Wechaty is a very awesome library that is powerful and easy to use. The most important point is that is interesting for Wechat users and developers. Last week, I want to help my friend to make a chat bot. Because she is a manager of a technic community and she is also a owner of a chat group. In her daily life, many people add her to be the bunny on wechat. Then she needs add these persons into wechat group. It is a manual work, right? So I want to help her to lessen workload. So I ready to use wechaty." />
<link rel="canonical" href="https://wechaty.js.org/2017/06/24/an-interesting-weekend-with-wechaty/" />
<meta property="og:url" content="https://wechaty.js.org/2017/06/24/an-interesting-weekend-with-wechaty/" />
<meta property="og:site_name" content="Wechaty" />
<meta property="og:image" content="https://wechaty.js.org/assets/2017/helen-screenshot-testing.webp" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://wechaty.js.org/assets/2017/helen-screenshot-testing.webp" />
<meta property="twitter:title" content="An interesting weekend with Wechaty" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"tingyinhelen"},"dateModified":"2017-06-24T00:00:00+00:00","datePublished":"2017-06-24T00:00:00+00:00","description":"Thanks for inviting me to write this article that give me a chance to share my story for each other. And Wechaty is a very awesome library that is powerful and easy to use. The most important point is that is interesting for Wechat users and developers. Last week, I want to help my friend to make a chat bot. Because she is a manager of a technic community and she is also a owner of a chat group. In her daily life, many people add her to be the bunny on wechat. Then she needs add these persons into wechat group. It is a manual work, right? So I want to help her to lessen workload. So I ready to use wechaty.","headline":"An interesting weekend with Wechaty","image":"https://wechaty.js.org/assets/2017/helen-screenshot-testing.webp","mainEntityOfPage":{"@type":"WebPage","@id":"https://wechaty.js.org/2017/06/24/an-interesting-weekend-with-wechaty/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://wechaty.js.org/assets/images/logo.png"},"name":"tingyinhelen"},"url":"https://wechaty.js.org/2017/06/24/an-interesting-weekend-with-wechaty/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">

    <link rel="manifest" href="/manifest.json">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://s3.pstatp.com/cdn/expire-1-M/font-awesome/5.3.1/css/all.css" crossorigin="anonymous">

    <!-- Google Fonts in China Thanks @crossly @sidny -->
    <link href="https://fonts.loli.net/css?family=Lora" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/assets/css/theme.css">

    <!-- Highlight Stylesheet -->
    <link rel="stylesheet" href="/assets/css/highlight.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://s0.pstatp.com/cdn/expire-1-M/jquery/3.3.1/jquery.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    




</head>

<body class="">
    <!-- https://github.com/t-richards/jekyll-google-tag-manager -->
    <!-- Begin Jekyll GTM tag v1.0.3 (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PD2PL84"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Jekyll GTM tag v1.0.3 (noscript) -->


    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/"><strong>Wechaty</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
  <a class="nav-link" href="/news/">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/blog/">Blog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://ship.fail" target="_blank">Ship.Fail</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://preangel.ai" target="_blank">PreAngel.AI</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/docs/">Docs</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="/contributors/">Contributors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/PMC#wechaty-committers" target="_blank">Talks</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://github.com/wechaty/wechaty#readme" target="_blank">GitHub</a>
</li>


            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <li class="nav-item">
                  <a class="nav-link" href="/search/">Search</a>
                </li>
            </ul>
        </div>
    </div>
    </nav>

  <!-- Search results moved to a dedicated /search page -->

    <!-- Content -->
    <main role="main" class="site-content">
        

<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row  justify-content-between ">
				<div class=" col-md-6  pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
            <span class="catlist">

            
              <a class="sscroll text-danger" href="/categories.html#project">project</a><span class="sep">, </span>
            

            </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">An interesting weekend with Wechaty</h1>
					<div class="d-flex align-items-center">
                        
                          <a href="/contributors/tingyinhelen">
                            <img class="rounded-circle" src="/assets/contributors/tingyinhelen/avatar.webp" alt="Helen" width="70"/>
                          </a>
                        
						<small class="ml-3"> <a href="/contributors/tingyinhelen">Helen</a> <span><a target="_blank" href="" class="btn btn-outline-success btn-sm btn-round ml-1">Follow</a></span>
                            <span class="text-muted d-block mt-1">Jun 24, 2017 · <span class="reading-time">
  
  
    7 mins read
  
</span>
</span>
						</small>
					</div>
				</div>
                
				<div class="col-md-6 pr-0 align-self-center">
					<img class="rounded" src="/assets/2017/helen-screenshot-testing.webp" alt="An interesting weekend with Wechaty">
				</div>
                
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">

    <!-- Share -->
<div class="col-lg-2 pr-4 mb-5 col-md-12">
  <div class="sticky-top sticky-top-offset text-center">
    <div class="text-muted">
    </div>
    <div class="share d-inline-block">
      <!-- AddToAny BEGIN -->
      <div class="a2a_kit a2a_kit_size_32 a2a_default_style">
        <img id="qrcode" title="Wechat"
          src="/assets/contributors/wechaty/icon.png"
          width="64" height="64"
        />
        <a class="a2a_button_twitter" title='Twitter'></a>
        <a class="a2a_button_linkedin" title='LinkedIn'></a>
        <a class="a2a_button_facebook" title='FaceBook'></a>
        <a class="a2a_dd" href="https://www.addtoany.com/share"></a>
      </div>
      <script async src="https://static.addtoany.com/menu/page.js"></script>
      <!-- AddToAny END -->
    </div>
  </div>
</div>

<script>
  var href = document.location.href
  var url = 'https://api.qrserver.com/v1/create-qr-code/?data='
            + href
            + '&size=512x512'
  var img = document.getElementById('qrcode')

  img.src=encodeURI(url)
</script>


		<div class="col-md-12 col-lg-8">

      <!-- Article -->
			<article class="article-post">
			<p>Thanks for inviting me to write this article that give me a chance to share my story for each other. And Wechaty is a very awesome library that is powerful and easy to use. The most important point is that is interesting for Wechat  users and developers.
Last week, I want to help my friend to make a chat bot. Because she is a manager of a technic community and she is also a owner of a chat group. In her daily life, many people add her to be the bunny on wechat. Then she needs add these persons into wechat group. It is a manual work, right? So I want to help her to lessen workload. So I ready to use wechaty.</p>

<p>Firstly, I implemented some basic features. Like below</p>

<h2 id="the-chat-bot-can-receive-the-friend-request-automatically">The chat bot can receive the friend request automatically</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">bot</span> <span class="o">=</span> <span class="nx">Wechaty</span><span class="p">.</span><span class="nf">instance</span><span class="p">({</span><span class="na">profile</span><span class="p">:</span> <span class="dl">'</span><span class="s1">secretary</span><span class="dl">'</span><span class="p">});</span>
<span class="nx">bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">friend</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contact</span><span class="p">,</span> <span class="nx">request</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">request</span><span class="p">){</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">.</span><span class="nf">accept</span><span class="p">()</span>
    <span class="k">await</span> <span class="nx">contact</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="dl">'</span><span class="s1">您好，我是 FCC（freeCodeCamp成都社区）的姜姜姜，很高兴认识你*^_^*回复暗号”FCC成都社区”， 加入FCC成都社区群。直接聊天，请  随意…</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="input-keyword-then-add-himher-into-the-chat-group">Input keyword then add him/her into the chat group</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
    <span class="kd">const</span> <span class="nx">fromContact</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="k">from</span><span class="p">()</span>
    <span class="kd">const</span> <span class="nx">fromContent</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nf">content</span><span class="p">()</span>
    <span class="kd">const</span> <span class="nx">room</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nf">room</span><span class="p">()</span>
    <span class="k">if</span><span class="p">(</span><span class="sr">/FCC成都社区/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">fromContent</span><span class="p">)){</span>
      <span class="kd">let</span> <span class="nx">keyroom</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Room</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span><span class="na">topic</span><span class="p">:</span> <span class="dl">'</span><span class="s1">FreeCodeCamp-成都</span><span class="dl">'</span><span class="p">});</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">keyroom</span><span class="p">){</span>
        <span class="k">await</span> <span class="nx">keyroom</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">fromContact</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">keyroom</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="s2">`欢迎 @</span><span class="p">${</span><span class="nx">fromContact</span><span class="p">.</span><span class="nf">name</span><span class="p">()}</span><span class="s2"> 加入FCC(freecodecamp)成都社区*^_^*`</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre></div></div>

<p>The above feature has already help her lessen some work. But my friend think it is not enough to satisfy her requirement. She is a very beautiful girl, so there is someone always asked her if she has boyfriend. That makes her boyfriend a little annoyed. So she want me to implement a feature that is if someone in this chat group ask her something about her bf the chat bot can send a photo of her bf.
Wow I’m honoured to develop this feature. So I started to read the doc of wechaty. But I can’t get how to send a media message. I continued reading all of the issues that let me know wechaty can send a media message but I don’t know the details. Then I try to use another methods. I try to use node.js to resolve. I want to change the images to be the buffer of base64. But it didn’t work, users just receive some strange string…..Finally I ask @huan directly. He sent me an article <a href="https://wechaty.github.io/2017/04/13/support-message-type-of-image-and-video.html">给机器人添加发送图片视频功能</a>. This article analysis the principle about how the wechat sends images. It says wechat use “MediaId” to store the information of media and blablablabla……Finally the Wechaty contributors got the “MediaId”. WoW so cool! They integrate this function in Wechaty which use <code class="language-plaintext highlighter-rouge">say(MediaMessage(filename))</code>.  If someone interested in this principle can read this article.
In the end of the article says <code class="language-plaintext highlighter-rouge">ding-dong-bot.ts</code> has already implement it. So I found this file that use like below:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">MediaMessage</span> <span class="p">}</span> <span class="nx">wechaty</span>
<span class="k">await</span> <span class="nx">m</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="k">new</span> <span class="nc">MediaMessage</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/../image/BotQrcode.png</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<p>I tried immediately, it does work. haha~perfect~
Then I  use <code class="language-plaintext highlighter-rouge">api.ai</code>. If someone say: ‘Does  @姜姜姜 have boy friend?’ or say some synonym the chat bot will send a photo of her bf automatically. Well that was I did in last weekend. I think wechaty is an interesting library.</p>

<p>At the end, I help the author of Wechaty add this api to the Wechaty documentation.</p>

<p><img src="/assets/2017/helen-screenshot-testing.webp" alt="Photo" /></p>

<p><img src="/assets/2017/helen-screenshot-doc.webp" alt="doc" /></p>

<p>Well, the complete codes like below:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">'</span><span class="s1">babel-polyfill</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Wechaty</span><span class="p">,</span> <span class="nx">Room</span><span class="p">,</span> <span class="nx">MediaMessage</span><span class="p">,</span> <span class="nx">log</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">wechaty</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">apiai</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">apiai</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">apiai</span><span class="p">(</span><span class="dl">'</span><span class="s1">46a33e7a9cb741fb96e0dcc3d2d03a6c</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bot</span> <span class="o">=</span> <span class="nx">Wechaty</span><span class="p">.</span><span class="nf">instance</span><span class="p">({</span><span class="na">profile</span><span class="p">:</span> <span class="dl">'</span><span class="s1">secretary</span><span class="dl">'</span><span class="p">});</span>

<span class="nx">bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">scan</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">code</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
  <span class="nx">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">login</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">user</span><span class="p">}</span><span class="s2"> is login`</span><span class="p">)</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">friend</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contact</span><span class="p">,</span> <span class="nx">request</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">request</span><span class="p">){</span>
    <span class="k">await</span> <span class="nx">request</span><span class="p">.</span><span class="nf">accept</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">contact</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="dl">'</span><span class="s1">您好，我是 FCC（freeCodeCamp成都社区）的姜姜姜，很高兴认识你*^_^*回复暗号”FCC成都社区”， 加入FCC成都社区群。直接聊天，请随意…</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nf">self</span><span class="p">()){</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">const</span> <span class="nx">fromContact</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="k">from</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">fromContent</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nf">content</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">room</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nf">room</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">noAtMention</span> <span class="o">=</span> <span class="nx">fromContent</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/@</span><span class="se">\w</span><span class="sr">+/ig</span><span class="p">,</span> <span class="dl">''</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">roomTopic</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nf">textRequest</span><span class="p">(</span><span class="nx">noAtMention</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">sessionId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1234567890</span><span class="dl">'</span>
  <span class="p">});</span>

  <span class="nx">request</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">log</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">request</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">response</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">speech</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">fulfillment</span><span class="p">.</span><span class="nx">speech</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="sr">/FCC成都社区/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">fromContent</span><span class="p">)){</span>
      <span class="kd">let</span> <span class="nx">keyroom</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Room</span><span class="p">.</span><span class="nf">find</span><span class="p">({</span><span class="na">topic</span><span class="p">:</span> <span class="dl">'</span><span class="s1">FreeCodeCamp-成都</span><span class="dl">'</span><span class="p">});</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">keyroom</span><span class="p">){</span>
        <span class="k">await</span> <span class="nx">keyroom</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="nx">fromContact</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">keyroom</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="s2">`欢迎 @</span><span class="p">${</span><span class="nx">fromContact</span><span class="p">.</span><span class="nf">name</span><span class="p">()}</span><span class="s2"> 加入FCC(freecodecamp)成都社区*^_^*`</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">m</span><span class="p">.</span><span class="nf">type</span><span class="p">()</span> <span class="o">==</span> <span class="mi">10000</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="dl">'</span><span class="s1">@Helen</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// Umm.. shame on me.... If someone give out a Red packet the chat bot will @ myself</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">room</span> <span class="o">&amp;&amp;</span> <span class="nx">room</span><span class="p">.</span><span class="nx">rawObj</span><span class="p">.</span><span class="nx">NickName</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">FreeCodeCamp-成都</span><span class="dl">'</span><span class="p">){</span>
      <span class="k">if</span><span class="p">(</span><span class="sr">/jiangjiangjiang/</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">speech</span><span class="p">)){</span>
        <span class="k">await</span> <span class="nx">m</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="k">new</span> <span class="nc">MediaMessage</span><span class="p">(</span><span class="dl">'</span><span class="s1">images/test.jpg</span><span class="dl">'</span><span class="p">))</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">m</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="nx">speech</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">room</span><span class="p">){</span>
      <span class="nx">m</span><span class="p">.</span><span class="nf">say</span><span class="p">(</span><span class="nx">speech</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="nx">request</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
<span class="p">})</span>
<span class="p">.</span><span class="nf">init</span><span class="p">()</span>
</code></pre></div></div>

<p>Finally, I want to thank our teammate <a href="https://github.com/dianwuone">@拖拉机</a> <a href="https://github.com/jiangyuzhen">@姜姜姜</a> <a href="https://github.com/Glowdable">@glowd</a> <a href="https://github.com/TingYinHelen">@myself</a></p>

<p><img src="https://avatars2.githubusercontent.com/u/14006826?v=3&amp;s=88" alt="avatar" /></p>

<blockquote>
  <p>Author: <a href="https://github.com/TingYinHelen">@Helen</a>, Lenovo</p>

  <p>Helen is a full stack engineer living in Chengdu, familiar with D3. When not coding, she loves dancing, sings and play Erhu.</p>
</blockquote>

			</article>

			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#code">code</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#featured">featured</a>
				
				  <a class="sscroll btn btn-light btn-sm font-weight-bold" href="/tags.html#social">social</a>
				
				</span>
			</div>

            <!-- Mailchimp Subscribe Form -->
            
			<div class="border p-5 bg-lightblue">
				<div class="row justify-content-between">
					<div class="col-md-6 mb-2 mb-md-0">
						<h5 class="font-weight-bold">Join Newsletter</h5>
						 Get the latest news right in your inbox. We never spam!
					</div>
					<div class="col-md-6">
						<div class="row">
              <form action="https://zixia.us4.list-manage.com/subscribe/post?u=a8584b55dea5aa8bbc14bd1a0&amp;id=d9899f0d70" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate w-100" target="_blank" novalidate>
                <input type="email" placeholder="Enter e-mail address" name="EMAIL" class="required email form-control w-100" id="mce-EMAIL" autocomplete="on" required>
                <input type="text"  placeholder="Name"                 name="FNAME" class="required form-control w-100"       id="mce-FNAME" autocomplete="on" required>
                <button type="submit" value="Subscribe" name="subscribe" class="heart btn btn-success btn-block w-100 mt-2">Subscribe</button>
              </form>
						</div>
					</div>
				</div>
			</div>
            


             <!-- Author Box -->
                
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                        
                          <a href="/contributors/tingyinhelen">
                            <img class="rounded-circle" src="/assets/contributors/tingyinhelen/avatar.webp" alt="Helen" width="90"/>
                          </a>
                        
					</div>
					<div class="col-md-10">
                        <h5 class="font-weight-bold">Written by <a href="/contributors/tingyinhelen">Helen</a> </h5>
						一个爱玩的程序员，喜欢折腾新技术，还喜欢研究框架源码。不写代码时喜欢跳舞，架子鼓，马拉松
					</div>
				</div>
                

            <!-- Comments -->
            
                <!--  Giscus embeds GitHub Discussions for per-post comments. Configuration intentionally hard-coded. -->

<div id="comments" class="mt-5">
    <script src="https://giscus.app/client.js"
            data-repo="wechaty/js.org"
            data-repo-id="R_kgDOHF4w6Q"
            data-category="General"
            data-category-id="DIC_kwDOHF4w6c4Cx6g7"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="1"
            data-input-position="bottom"
            data-theme="light"
            data-lang="en"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>
        Comments require JavaScript. You can also join the discussion on our
        <a href="https://github.com/wechaty/js.org/discussions/categories/general" rel="noopener" target="_blank">GitHub Discussions</a> page.
    </noscript>
</div>

            

		</div>


	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          
            <div class="col-md-6 rightborder pl-0">
                <a class="text-dark" href="/2017/06/06/the-first-chatie-wwdc-party/"> <img height="30px" class="mr-1" src="https://wechaty.js.org/assets/2017/wechaty-wwdc.webp">  The First Wechaty WWDC Party in 2017</a>
            </div>
          
          
            <div class="col-md-6 text-right pr-0">
                <a class="text-dark" href="/2017/07/06/wechaty-sticker-on-sale/"> Wechaty Sticker is ON SALE!  <img height="30px" class="ml-1" src="https://wechaty.js.org/assets/2017/wechaty-sticker.webp"> </a>
            </div>
          
        </div>
    </div>
</div>

    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.loli.net/ajax/libs/popper.js/1.14.6/umd/popper.min.js" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <script src="/assets/js/theme.js"></script>

  





    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <a href="#" class="text-muted navbar-brand mr-2 mb-0">
                  <strong>Wechaty</strong>
                </a>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script></span>
                |
                <a
                  class="text-muted"
                  target="_blank"
                  href="/branding/"
                >
                  Branding
                </a>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/wechaty"><i class="fab fa-github"></i> </a>

            </div>

            <div class="text-gray">
              Powered by
              <a
                class="text-gray font-weight-bold"
                target="_blank"
                href="https://www.wowthemes.net/mundana-jekyll-theme/"
              >
                Mundana Jekyll Theme
              </a>
              .
            </div>
        </div>
        </div>
    </footer>

    <!-- All this area goes before             <script>
                window.onload = function () {
                    var script = document.createElement('script');
                    var firstScript = document.getElementsByTagName('script')[0];
                    script.type = 'text/javascript';
                    script.async = true;
                    script.src = '/sw-register.js?v=' + Date.now();
                    firstScript.parentNode.insertBefore(script, firstScript);
                };
            </script>
            </body>
 closing tag -->


</body>

</html>
